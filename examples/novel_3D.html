<link rel="stylesheet" href="/static/style/examples/novel_3D/index.css" />
<div class="novel_3D">
  <div class="left"></div>
  <div class="right">
    <div class="cover">序章</div>
    <div class="cover">第一章</div>
    <div class="cover">第二章</div>
    <div class="cover">第三章</div>
    <div class="cover">第四章</div>
  </div>
</div>

<script type="module">
  class ElementNode {
    static get getAllCover() {
      return document.querySelectorAll(".cover");
    }

    static onCLick(index) {
      this.classList.toggle("active");
      if (this.classList.contains("active")) {
        this.style.transform = "perspective(1000px) rotateY(-180deg)";
        this.style.zIndex = index;
      } else {
        this.style.transform = "perspective(1000px) rotateY(0deg)";
        this.style.zIndex = ElementNode.getAllCover.length - index;
      }
    }
  }

  window.onload = () => {
    ElementNode.getAllCover.forEach((item, index) => {
      item.style.zIndex = ElementNode.getAllCover.length - index;
      item.addEventListener("click", (e) => {
        ElementNode.onCLick.call(e.target, index);
      });
    });
  };
</script>
